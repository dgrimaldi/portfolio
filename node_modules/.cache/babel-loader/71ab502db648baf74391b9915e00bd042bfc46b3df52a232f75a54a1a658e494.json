{"ast":null,"code":"import * as d3 from \"d3\";\nconst graphDimension = {\n  width: 600,\n  height: 450\n};\nconst radius = 100;\nexport const d3CircularPacking = (svg, numberOfCircle) => {\n  // create dummy data -> just one element per circle\n  let data = d3.range(numberOfCircle()).map(() => ({}));\n\n  // Initialize the circle: all located at the center of the svg area\n  const node = svg.append(\"g\").selectAll(\"circle\").data(data).enter().append(\"circle\").attr(\"r\", 15).attr(\"cx\", graphDimension.width).attr(\"cy\", 250).style(\"fill\", \"#69b3a2\").style(\"fill-opacity\", 0.3).attr(\"stroke\", \"#69a2b2\").style(\"stroke-width\", 4);\n\n  // @ts-ignore\n  node.call(d3.drag().on(\"start\", started).on(\"drag\", dragged).on(\"end\", ended));\n  function ticked() {\n    node.attr(\"cx\", d => d.x).attr(\"cy\", d => d.y);\n  }\n  const simulation = d3.forceSimulation(data).force(\"collide\", d3.forceCollide(radius).iterations(4)).on(\"tick\", ticked);\n  function started(event) {\n    if (!event.active) simulation.alphaTarget(0.3).restart();\n    event.subject.fx = event.subject.x;\n    event.subject.fy = event.subject.y;\n  }\n  function dragged(event) {\n    event.subject.fx = event.x;\n    event.subject.fy = event.y;\n  }\n  function ended(event) {\n    if (!event.active) simulation.alphaTarget(0);\n    event.subject.fx = null;\n    event.subject.fy = null;\n  }\n  return svg;\n};","map":{"version":3,"names":["d3","graphDimension","width","height","radius","d3CircularPacking","svg","numberOfCircle","data","range","map","node","append","selectAll","enter","attr","style","call","drag","on","started","dragged","ended","ticked","d","x","y","simulation","forceSimulation","force","forceCollide","iterations","event","active","alphaTarget","restart","subject","fx","fy"],"sources":["/home/dgrimaldi/Documents/portfolio/src/d3/D3CircularPacking.ts"],"sourcesContent":["import {SimulationNodeDatum} from \"d3\";\nimport * as d3 from \"d3\";\nconst graphDimension: { width: number, height: number } = { width: 600, height: 450};\nconst radius = 100;\nexport const d3CircularPacking = (svg: d3.Selection<d3.BaseType, unknown, HTMLElement, SVGElement>, numberOfCircle: () => number) => {\n\n        // create dummy data -> just one element per circle\n        let data: SimulationNodeDatum[] = d3.range(numberOfCircle()).map(() => ({}))\n\n        // Initialize the circle: all located at the center of the svg area\n        const node: d3.Selection<SVGCircleElement, SimulationNodeDatum, SVGGElement, unknown> = svg.append(\"g\")\n            .selectAll(\"circle\")\n            .data(data)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", 15)\n            .attr(\"cx\", graphDimension.width)\n            .attr(\"cy\", 250)\n            .style(\"fill\", \"#69b3a2\")\n            .style(\"fill-opacity\", 0.3)\n            .attr(\"stroke\", \"#69a2b2\")\n            .style(\"stroke-width\", 4)\n\n\n        // @ts-ignore\n        node.call(d3.drag()\n            .on(\"start\", started)\n            .on(\"drag\", dragged)\n            .on(\"end\", ended));\n        function ticked() {\n            node\n                .attr(\"cx\", (d:any) => d.x)\n                .attr(\"cy\", (d:any)  => d.y);\n        }\n\n        const simulation = d3.forceSimulation(data)\n            .force(\"collide\", d3.forceCollide(radius).iterations(4))\n            .on(\"tick\", ticked);\n        function started(event:any) {\n            if (!event.active) simulation.alphaTarget(0.3).restart();\n            event.subject.fx = event.subject.x;\n            event.subject.fy = event.subject.y;\n        }\n\n        function dragged(event:any) {\n            event.subject.fx = event.x;\n            event.subject.fy = event.y;\n        }\n\n        function ended(event:any) {\n            if (!event.active) simulation.alphaTarget(0);\n            event.subject.fx = null;\n            event.subject.fy = null;\n        }\n        return svg\n\n}"],"mappings":"AACA,OAAO,KAAKA,EAAE,MAAM,IAAI;AACxB,MAAMC,cAAiD,GAAG;EAAEC,KAAK,EAAE,GAAG;EAAEC,MAAM,EAAE;AAAG,CAAC;AACpF,MAAMC,MAAM,GAAG,GAAG;AAClB,OAAO,MAAMC,iBAAiB,GAAGA,CAACC,GAAgE,EAAEC,cAA4B,KAAK;EAE7H;EACA,IAAIC,IAA2B,GAAGR,EAAE,CAACS,KAAK,CAACF,cAAc,CAAC,CAAC,CAAC,CAACG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;;EAE5E;EACA,MAAMC,IAA+E,GAAGL,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAClGC,SAAS,CAAC,QAAQ,CAAC,CACnBL,IAAI,CAACA,IAAI,CAAC,CACVM,KAAK,CAAC,CAAC,CACPF,MAAM,CAAC,QAAQ,CAAC,CAChBG,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,CACbA,IAAI,CAAC,IAAI,EAAEd,cAAc,CAACC,KAAK,CAAC,CAChCa,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CACfC,KAAK,CAAC,MAAM,EAAE,SAAS,CAAC,CACxBA,KAAK,CAAC,cAAc,EAAE,GAAG,CAAC,CAC1BD,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,CACzBC,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC;;EAG7B;EACAL,IAAI,CAACM,IAAI,CAACjB,EAAE,CAACkB,IAAI,CAAC,CAAC,CACdC,EAAE,CAAC,OAAO,EAAEC,OAAO,CAAC,CACpBD,EAAE,CAAC,MAAM,EAAEE,OAAO,CAAC,CACnBF,EAAE,CAAC,KAAK,EAAEG,KAAK,CAAC,CAAC;EACtB,SAASC,MAAMA,CAAA,EAAG;IACdZ,IAAI,CACCI,IAAI,CAAC,IAAI,EAAGS,CAAK,IAAKA,CAAC,CAACC,CAAC,CAAC,CAC1BV,IAAI,CAAC,IAAI,EAAGS,CAAK,IAAMA,CAAC,CAACE,CAAC,CAAC;EACpC;EAEA,MAAMC,UAAU,GAAG3B,EAAE,CAAC4B,eAAe,CAACpB,IAAI,CAAC,CACtCqB,KAAK,CAAC,SAAS,EAAE7B,EAAE,CAAC8B,YAAY,CAAC1B,MAAM,CAAC,CAAC2B,UAAU,CAAC,CAAC,CAAC,CAAC,CACvDZ,EAAE,CAAC,MAAM,EAAEI,MAAM,CAAC;EACvB,SAASH,OAAOA,CAACY,KAAS,EAAE;IACxB,IAAI,CAACA,KAAK,CAACC,MAAM,EAAEN,UAAU,CAACO,WAAW,CAAC,GAAG,CAAC,CAACC,OAAO,CAAC,CAAC;IACxDH,KAAK,CAACI,OAAO,CAACC,EAAE,GAAGL,KAAK,CAACI,OAAO,CAACX,CAAC;IAClCO,KAAK,CAACI,OAAO,CAACE,EAAE,GAAGN,KAAK,CAACI,OAAO,CAACV,CAAC;EACtC;EAEA,SAASL,OAAOA,CAACW,KAAS,EAAE;IACxBA,KAAK,CAACI,OAAO,CAACC,EAAE,GAAGL,KAAK,CAACP,CAAC;IAC1BO,KAAK,CAACI,OAAO,CAACE,EAAE,GAAGN,KAAK,CAACN,CAAC;EAC9B;EAEA,SAASJ,KAAKA,CAACU,KAAS,EAAE;IACtB,IAAI,CAACA,KAAK,CAACC,MAAM,EAAEN,UAAU,CAACO,WAAW,CAAC,CAAC,CAAC;IAC5CF,KAAK,CAACI,OAAO,CAACC,EAAE,GAAG,IAAI;IACvBL,KAAK,CAACI,OAAO,CAACE,EAAE,GAAG,IAAI;EAC3B;EACA,OAAOhC,GAAG;AAElB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}